PREFIX base: <http://purl.oclc.org/NET/ssnx/ssn>
PREFIX ssn: <http://purl.oclc.org/NET/ssnx/ssn#>
PREFIX dul1: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#>
PREFIX dul2: <http://www.loa-cnr.it/ontologies/DUL.owl#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xml: <http://www.w3.org/XML/1998/namespace>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX actgu: <http://www.msicu.onto/actgu#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

# Seleccionar variables
SELECT REDUCED ?val_temperatura ?val_humedad ?val_congas ?val_velaire

# Condiciones de consulta
WHERE {
        # Recuperar la información sobre el sentor de TEMPERATURA
        ?tempproper rdf:type ssn:Property .
        ?tempproper owl:topDataProperty "temperature" .
        ?tempsensor rdf:type ssn:Sensor .
        ?tempsensor ssn:observes ?tempproper .
        ?tempsenout rdf:type ssn:SensorOutput .
        ?tempsenout ssn:isProducedBy ?tempsensor .
        # >> Solo tomar la TEMPERATURA
        ?temperatura rdf:type ssn:ObservationValue .
        ?tempsenout ssn:hasValue ?temperatura .

        # Recuperar la información sobre el sentor de HUMEDAD
        ?humdproper rdf:type ssn:Property .
        ?humdproper owl:topDataProperty "humidity" .
        ?humdsensor rdf:type ssn:Sensor .
        ?humdsensor ssn:observes ?humdproper .   
        ?humdsenout rdf:type ssn:SensorOutput .
        ?humdsenout ssn:isProducedBy ?humdsensor .
        # >> Solo tomar la HUMEDAD
        ?humedad rdf:type ssn:ObservationValue .
        ?humdsenout ssn:hasValue ?humedad .

        # Recuperar la información sobre el sentor de CONCENTRACIÓN DE GAS
        ?cgasproper rdf:type ssn:Property .
        ?cgasproper owl:topDataProperty "gas concentration" .
        ?cgassensor rdf:type ssn:Sensor .
        ?cgassensor ssn:observes ?cgasproper .   
        ?cgassenout rdf:type ssn:SensorOutput .
        ?cgassenout ssn:isProducedBy ?cgassensor .
        # >> Solo tomar la CONCENTRACIÓN DE GAS
        ?congas rdf:type ssn:ObservationValue .
        ?cgassenout ssn:hasValue ?congas .

        # Recuperar la información sobre el sentor de VELOCIDAD DEL AIRE
        ?vaireproper rdf:type ssn:Property .
        ?vaireproper owl:topDataProperty "air velocity" .
        ?vairesensor rdf:type ssn:Sensor .
        ?vairesensor ssn:observes ?vaireproper .   
        ?vairesenout rdf:type ssn:SensorOutput .
        ?vairesenout ssn:isProducedBy ?vairesensor .
        # >> Solo tomar la VELOCIDAD DEL AIRE
        ?velaire rdf:type ssn:ObservationValue .
        ?vairesenout ssn:hasValue ?velaire .

        # >> Datos sobre condiciones ambientales actuales
        ?temperatura owl:topDataProperty ?val_temperatura .
        ?humedad owl:topDataProperty ?val_humedad .
        ?congas owl:topDataProperty ?val_congas .
        ?velaire owl:topDataProperty ?val_velaire .

        FILTER ((datatype(?val_temperatura)) = xsd:double) .
        FILTER ((datatype(?val_humedad)) = xsd:double) .
        FILTER ((datatype(?val_congas)) = xsd:double) .
        FILTER ((datatype(?val_velaire)) = xsd:double)
}





































 



# Prefijos base
PREFIX base: <http://purl.oclc.org/NET/ssnx/ssn>
PREFIX ssn: <http://purl.oclc.org/NET/ssnx/ssn#>
PREFIX dul1: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#>
PREFIX dul2: <http://www.loa-cnr.it/ontologies/DUL.owl#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xml: <http://www.w3.org/XML/1998/namespace>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX actgu: <http://www.msicu.onto/actgu#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

# Seleccionar variables
SELECT REDUCED ?val_persona ?val_prioridad ?val_sexo ?val_edad ?val_bmi ?val_met ?val_cloviste ?val_cloprefiere ?val_pmvpreferido ?val_tempmaxgusta ?val_tempmingusta
        
# Condiciones de consulta
WHERE {
        # Recupera a todas las personas
        ?persona rdf:type foaf:Person .
        
        # Recuperar la prioridad de cada persona
        ?prioridad rdf:type actgu:Priority .
        ?prioridad actgu:characterizes ?persona .

        # Recuperar la información demográfica de cada persona
        ?demografico rdf:type actgu:Demographic .
        ?demografico actgu:characterizes ?persona .
        # >> Solo tomar el GENERO de la persona
        ?sexo rdf:type actgu:Gender .
        ?demografico actgu:is ?sexo .
        # >> Solo tomar la EDAD de la persona
        ?edad rdf:type actgu:Age .
        ?demografico actgu:is ?edad .

        # Recuperar la información antropométrica de cada persona
        ?atropometrico rdf:type actgu:Anthropometry .
        ?atropometrico actgu:characterizes ?persona .
        # >> Tomar los valores antropometricos de la persona
        ?bmi rdf:type actgu:AnthropometricValue .
        ?atropometrico actgu:hasValue ?bmi .
        ?unidadmed rdf:type dul2:UnitOfMeasure .
        # >> Solo tomar el valor antropometrico de tipo BMI de la persona
        ?bmi actgu:isClassifiedBy ?unidadmed .
        ?unidadmed owl:topDataProperty "bmi"^^xsd:string .

        # Recuperar el MET que tiene actualmente cada persona
        ?met rdf:type actgu:MetabolicRate .
        ?persona actgu:hasPhysicalWear ?met .

        # Recuperar el CLO que viste actualmente cada persona
        ?cloviste rdf:type actgu:InsulationValue .
        ?cloviste actgu:isEquippedBy ?persona .

        # Recuperar el CLO preferido por cada persona
        ?cloprefiere rdf:type actgu:InsulationValue .
        ?cloprefiere actgu:isPreferredBy ?persona .

        # Recuperar el PMV preferido de cada persona
        ?pmvpreferido rdf:type actgu:ThermalComfort .
        ?persona actgu:likes ?pmvpreferido .

        # Recuperar la temperatura máxima preferida por cada persona
        ?tempmaxgusta rdf:type actgu:AmbientCondition .
        ?persona actgu:maximumEnjoy ?tempmaxgusta .

        # Recuperar la temperatura mínima preferida por cada persona
        ?tempmingusta rdf:type actgu:AmbientCondition .
        ?persona actgu:minimumEnjoy ?tempmingusta .

        # Recuperar el dato de las variables consultadas
        # >> Datos sobre la persona
        ?persona owl:topDataProperty ?val_persona .
        ?prioridad owl:topDataProperty ?val_prioridad .
        ?sexo owl:topDataProperty ?val_sexo .
        ?edad owl:topDataProperty ?val_edad .
        ?bmi owl:topDataProperty ?val_bmi .
        ?met owl:topDataProperty ?val_met .
        ?cloviste owl:topDataProperty ?val_cloviste .
        ?cloprefiere owl:topDataProperty ?val_cloprefiere .
        ?pmvpreferido owl:topDataProperty ?val_pmvpreferido .
        ?tempmaxgusta owl:topDataProperty ?val_tempmaxgusta .
        ?tempmingusta owl:topDataProperty ?val_tempmingusta .
        
        FILTER ((datatype(?val_persona)) = xsd:nonNegativeInteger) .
        FILTER ((datatype(?val_prioridad)) = xsd:nonNegativeInteger)
        FILTER ((datatype(?val_sexo)) = xsd:string) .
        FILTER ((datatype(?val_edad)) = xsd:nonNegativeInteger) .
        FILTER ((datatype(?val_bmi)) = xsd:double) .
        FILTER ((datatype(?val_met)) = xsd:double) .
        FILTER ((datatype(?val_cloviste)) = xsd:double) .
        FILTER ((datatype(?val_cloprefiere)) = xsd:double) .

        FILTER ((datatype(?val_pmvpreferido)) = xsd:string) .
        FILTER ((datatype(?val_tempmaxgusta)) = xsd:double) .
        FILTER ((datatype(?val_tempmingusta)) = xsd:double)
}




























PREFIX base: <http://purl.oclc.org/NET/ssnx/ssn>
PREFIX ssn: <http://purl.oclc.org/NET/ssnx/ssn#>
PREFIX dul1: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#>
PREFIX dul2: <http://www.loa-cnr.it/ontologies/DUL.owl#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xml: <http://www.w3.org/XML/1998/namespace>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX actgu: <http://www.msicu.onto/actgu#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

# Seleccionar variables
SELECT REDUCED ?val_actuador ?val_estado ?val_tipo

# Condiciones de consulta
WHERE {
        # Recuperar instancia de actuador
        ?actuador rdf:type actgu:Actuator .
        # Recuperar instancia de Estado y Tipo
        ?estado rdf:type actgu:State .
        ?tipo rdf:type actgu:Type .
        # Relacionar instancia
        ?actuador actgu:present ?estado .
        ?actuador actgu:present ?tipo .

        # Extraer valor exacto
        ?actuador owl:topDataProperty ?val_actuador .
        ?estado owl:topDataProperty ?val_estado .
        ?tipo owl:topDataProperty ?val_tipo .

        FILTER ((datatype(?val_actuador)) = xsd:nonNegativeInteger) .
        FILTER ((datatype(?val_estado)) = xsd:string) .
        FILTER ((datatype(?val_tipo)) = xsd:string)
}




































# Prefijos base
PREFIX base: <http://purl.oclc.org/NET/ssnx/ssn>
PREFIX ssn: <http://purl.oclc.org/NET/ssnx/ssn#>
PREFIX dul1: <http://www.ontologydesignpatterns.org/ont/dul/DUL.owl#>
PREFIX dul2: <http://www.loa-cnr.it/ontologies/DUL.owl#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX xml: <http://www.w3.org/XML/1998/namespace>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX actgu: <http://www.msicu.onto/actgu#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

# Seleccionar variables
SELECT REDUCED ?val_grupo ?val_persona ?val_met
        
# Condiciones de consulta
WHERE {
        # Recupera a todas los Grupos
        ?grupo rdf:type foaf:Group .
        ?grupo owl:topDataProperty "7a" .

        # Recupera a todas las personas
        ?persona rdf:type foaf:Person .
        ?grupo foaf:member ?persona .

        # Recuperar el MET que tiene actualmente cada persona
        ?met rdf:type actgu:MetabolicRate .
        ?persona actgu:hasPhysicalWear ?met .

        # Recuperar el dato de las variables consultadas
        # >> Datos sobre la persona
        ?grupo owl:topDataProperty ?val_grupo .
        ?persona owl:topDataProperty ?val_persona .
        ?met owl:topDataProperty ?val_met .
        
        FILTER ((datatype(?val_grupo)) = xsd:string) .
        FILTER ((datatype(?val_persona)) = xsd:nonNegativeInteger) .
        FILTER ((datatype(?val_met)) = xsd:double)
}
